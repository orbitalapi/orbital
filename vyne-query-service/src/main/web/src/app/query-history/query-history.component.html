<mat-toolbar color="primary" style="z-index: 999">
  <span>Query History</span>
  <span style="flex: 1"></span>
  <app-search-bar-container></app-search-bar-container>
</mat-toolbar>
<div class="container">
  <div class="list-container">
    <div class="title-bar">
      <h4>Query History</h4>
      <button (click)="loadData()" mat-icon-button>
        <i class="material-icons">
          refresh
        </i>
      </button>
    </div>
    <div class="history-item" *ngFor="let historyRecord of history" (click)="setActiveRecord(historyRecord)">
      <div class="query-description">
        <div class="given-line">
          Given (<span class="type-name"
                       *ngFor="let factName of getFactTypeNames(historyRecord); last as isLast">{{ factName }}<span
          *ngIf="!isLast">, </span> </span>)
        </div>
        <div class="discover-line">
          <span class="verb">{{ historyRecord.query.queryMode.toLowerCase() }} </span>
          <span class="type-name">{{ expressionTypeName(historyRecord.query.expression) }}</span>
        </div>
      </div>
      <div class="state-row">

      </div>
      <div class="timestamp-row">
        <span>{{historyRecord.timestamp | amTimeAgo}}</span>
      </div>

    </div>
  </div>
  <div class="results-section">
    <div class="title-bar"><h4>Query Result</h4></div>
    <div class="results-container">
      <query-result-container [result]="activeRecord?.response"></query-result-container>
    </div>
  </div>

</div>
