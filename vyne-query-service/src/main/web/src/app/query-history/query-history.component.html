<app-panel-header title="Query History">
  <div class="spacer"></div>
  <button appearance="outline" size="s"
          tuiButton
          type="button" class='button-small menu-bar-button' (click)="loadQuerySummaries()">Refresh
  </button>
</app-panel-header>
<div class="container">
  <app-query-list [historyRecords]="history"
                  [activeQueries]="activeQueries"
                  (cancelActiveQuery)="cancelActiveQuery($event)"
                  (recordSelected)="setActiveRecord($event)"></app-query-list>
  <as-split direction="horizontal" unit="pixel">
    <as-split-area>
      <app-tabbed-results-view *ngIf="activeRecordResults$"
                               [profileData$]="activeQueryProfileData$"
                               [instances$]="activeRecordResults$"
                               [type]="activeRecordResultType"
                               (downloadClicked)="downloadQueryHistory($event)"
                               (instanceSelected)="instanceSelected$.next($event); sidePanelVisible = true;"></app-tabbed-results-view>
    </as-split-area>
    <as-split-area *ngIf="sidePanelVisible" size="250">
      <app-typed-instance-panel-container
        (close)="sidePanelVisible = false;"
        [queryResultSelectedEvent$]="instanceSelected$"
      ></app-typed-instance-panel-container>
    </as-split-area>
  </as-split>

  <!--  <div class="results-section" *ngIf="config && !config.analytics.persistResults">-->
  <!--    <h2>-->
  <!--      Display of query results and profile data is disabled.-->
  <!--    </h2>-->
  <!--    <p>-->
  <!--      To display historical results and profile information, Vyne needs to store relevant data during query execution.-->
  <!--      Currently this is-->
  <!--      disabled.-->
  <!--    </p>-->
  <!--    <p>-->
  <!--      To enable, modify the-->
  <!--      <code>vyne.history.persistResults</code> setting in your server config, setting to true.-->
  <!--    </p>-->
  <!--    <p>Once this is done, you'll need to re-start Vyne and re-run your query.</p>-->
  <!--  </div>-->

</div>
