<div>
  <div class="result-status error-display" *ngIf="isError">
    <i class="material-icons">error_outline</i>
    <span>{{ result.message }}</span>
  </div>
  <div class="result-status unsuccessful-search" *ngIf="isUnsuccessfulSearch">
    <i class="material-icons">error_outline</i>
    <span>Couldn't find a path for the following types: {{ unmatchedNodes }}</span>
  </div>

  <div class="results-container">
    <mat-tab-group>
      <mat-tab label="Result">
        <button mat-stroked-button [matMenuTriggerFor]="menu" *ngIf="queryResultTypeNames.length>0" class="downloadFileButton">Download</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="downloadQueryHistory(downloadFileType.JSON)">as JSON</button>
          <button mat-menu-item (click)="downloadQueryHistory(downloadFileType.CSV)">as CSV</button>
        </mat-menu>
        <div *ngFor="let resultTypeName of queryResultTypeNames" class="result-object-view">

          <app-object-view [instance]="getResultForTypeName(resultTypeName)"
                           [schema]="schema"
                           [selectable]="true"
                           [type]="getTypeIfNotIncluded(resultTypeName)"
                           (instanceClicked)="instanceClicked($event)"
          ></app-object-view>
        </div>
      </mat-tab>
      <mat-tab label="Json">
        <div *ngFor="let resultTypeName of queryResultTypeNames" class="result-card">

          <app-simple-code-viewer name="Json" [content]="getResultForTypeName(resultTypeName)"
                                  lang="json"></app-simple-code-viewer>
        </div>
      </mat-tab>

    </mat-tab-group>

    <app-call-explorer *ngIf="showMermaid" [queryResult]="result"></app-call-explorer>
  </div>
</div>
