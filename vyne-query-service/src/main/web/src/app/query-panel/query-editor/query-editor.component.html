<as-split direction="vertical" unit="pixel">
  <as-split-area [size]="220">
    <div class="code-editor-section">
      <div class="code-viewer-container">
        <ngx-monaco-editor [options]="editorOptions" class="code-editor" [(ngModel)]="query" #editor>
        </ngx-monaco-editor>
      </div>

      <app-query-editor-bottom-bar
        (executeQuery)="submitQuery()"
        [currentState]="currentState"
        [error]="lastErrorMessage"
        [runningQueryStatus]="queryStatus"
        (cancelQuery)="cancelQuery()"
      >
      </app-query-editor-bottom-bar>
    </div>
  </as-split-area>
  <as-split-area size="*">
    <app-error-panel *ngIf="lastQueryResultAsSuccess?.unmatchedNodes?.length > 0" [queryResult]="lastQueryResultAsSuccess">
    </app-error-panel>
    <div *ngIf="showPartialResults" class="partial-results-panel">
      <div>This query is currently executing.  Partial results are shown below</div>
      <app-results-table
        [instances$]="partialResults$"
        [type]="partialResultType"
        [schema]="schema"
        [selectable]="false"
      >

      </app-results-table>
    </div>
    <app-tabbed-results-view *ngIf="lastQueryResult"
                             [result]="lastQueryResult"
                             (instanceSelected)="instanceSelected.emit($event)"
                             (downloadClicked)="downloadQueryHistory($event.format)"
    ></app-tabbed-results-view>

  </as-split-area>
</as-split>


