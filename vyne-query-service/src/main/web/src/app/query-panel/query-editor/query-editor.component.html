<as-split direction="vertical" unit="percent">
  <as-split-area [size]="50">
    <div class="code-editor-section">
      <div class="code-viewer-container">
        <app-code-editor
            class="code-editor"
            (contentChanged)="onContentChanged($event)"
            [content]="query" #editor></app-code-editor>
      </div>
      <app-query-editor-bottom-bar
        (executeQuery)="submitQuery()"
        [currentState]="currentState"
        [error]="lastErrorMessage"
        [runningQueryStatus]="queryMetadata$ | async"
        (cancelQuery)="cancelQuery()"
      >
      </app-query-editor-bottom-bar>

    </div>
  </as-split-area>
  <as-split-area size="*">
    <app-error-panel *ngIf="lastQueryResultAsSuccess?.unmatchedNodes?.length > 0" [queryResult]="lastQueryResultAsSuccess">
    </app-error-panel>

    <app-tabbed-results-view *ngIf="resultType"
                             [instances$]="results$"
                             [profileData$]="queryProfileData$"
                             [type]="resultType"
                             [anonymousTypes]="anonymousTypes"
                             (instanceSelected)="instanceSelected.emit($event)"
                             (downloadClicked)="downloadQueryHistory($event.format)"
    ></app-tabbed-results-view>

  </as-split-area>
</as-split>


