<app-header-bar title="Data Catalogue">
</app-header-bar>
<div class="page-content" appTocHost tocTag="h2" (contentsChanged)="contents = $event">
  <div class="documentation" *ngIf="type">
    <div class="type-name">
      <h1>{{type?.name?.name}}</h1>
      <span class="mono-badge">{{type?.name?.fullyQualifiedName}}</span>
    </div>


    <!--    <section>-->
    <!--      <h2>About this type</h2>-->
    <!--      <p>{{description}}</p>-->
    <!--    </section>-->
    <section>
      <app-description-editor-container [type]="type"></app-description-editor-container>
    </section>
    <section class="no-h2">
      <app-tags-section [metadata]="type.metadata" [type]="type"></app-tags-section>
    </section>
    <app-inheritance-graph *ngIf="inheritanceView" [inheritable]="inheritanceView"></app-inheritance-graph>
    <section *ngIf="hasAttributes">
      <h2>Attributes</h2>
      <app-attribute-table [type]="type"></app-attribute-table>
    </section>
    <section *ngIf="hasEnumValues">
      <h2>Enum Values</h2>
      <app-enum-table [type]="type"></app-enum-table>
    </section>
    <section>
      <h2>Usages</h2>
      <h3>Services</h3>
      <app-usages-table [typeUsages]="typeUsages"></app-usages-table>
      <h3>Chart</h3>
      <mat-button-toggle-group #chartSelector="matButtonToggleGroup" value="links" appearance="legacy">
        <mat-button-toggle value="links">Links</mat-button-toggle>
        <mat-button-toggle value="lineage">Lineage</mat-button-toggle>
      </mat-button-toggle-group>
      <div class="chart-container" *ngIf="chartSelector.value === 'lineage'">
        <p class="help-text">This chart shows how {{type.name.shortDisplayName}} data flows between data sources and systems.</p>
        <p class="help-text">{{type.name.shortDisplayName}} flows between these services outside of Vyne.</p>
        <app-service-lineage-graph-container  [type]="schemaMember"></app-service-lineage-graph-container>
      </div>
      <div class="chart-container">
        <p class="help-text">This chart shows how {{type.name.shortDisplayName}} links between data sources to make other data available.</p>
        <p class="help-text">The data shown here is discoverable by Vyne using a query, and knowing the value of a {{type.name.shortDisplayName}}. </p>
      </div>
      <app-type-link-graph-container [member]="schemaMember" *ngIf="chartSelector.value === 'links'"></app-type-link-graph-container>
    </section>

    <section *ngIf="showPolicyManager">
      <h2>Policies</h2>
      <app-policy-manager-container [targetType]="type"></app-policy-manager-container>

    </section>

    <section>
      <h2>Definition</h2>
      <app-simple-code-viewer name="Taxi" [content]="sourceTaxi" lang="taxi" [expanded]="true"></app-simple-code-viewer>
<!--      <app-code-viewer [sources]="sources"></app-code-viewer>-->
    </section>
  </div>
  <div class="spacer-gap"></div>
  <app-contents-table [contents]="contents"></app-contents-table>
</div>

