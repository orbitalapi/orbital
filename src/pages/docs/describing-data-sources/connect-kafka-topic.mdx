---
title: Connect a kafka topic
description: Learn how to make a Kafka Topic available for Orbital to query
---

import {Callout} from "@/components/docs/Callout";

Orbital can read data from a Kafka topic to stream data as part of a query.

<!--
## Add a topic through the UI

The UI allows you to connect a Kafka topic directly, without having to manually edit taxi files.

<Callout type="note" title="Before you begin">

When importing a topic, it's expected that the model type already exists.

Either declare your model directly in your taxi schema, or consider importing
a model type, for example - [importing a Protobuf schema](/docs/describing-data-sources/protobuf/#importing-a-protobuf-through-the-ui)
</Callout>
-->

<Callout type="note" title="Before you begin">

  When declaring a topic in Taxi, you need to define a connection to the Kafka broker in your <code>connections.conf</code> file.
  
  Read more about defining Kafka connections <a href='/docs/describing-data-sources/configuring-connections#kafka-connections'>here</a>.
</Callout>


## Declaring a topic in Taxi

Kafka topics are declared in taxi as simple Operations which return a Stream of data.

```taxi
// 1: Add the required imports
import io.orbital.kafka.KafkaService
import io.orbital.kafka.KafkaOperation

// 2: Annotate the service as a `KafkaService`.
@KafkaService( connectionName = "moviesConnection" )
service MyKafkaService {

   // 3: Annotate the operation as a `@KafkaOperation`
   @KafkaOperation( topic = "hello-worlds", offset = "earliest" )
   // The topic is declared as a stream, and returns a Stream<>
   stream streamGoodThings():Stream<HelloWorld>
}
```

 1. Add the required imports
 1. Annotate the service with `@KafkaService`
    * The `connectionName` parameter should match a connection listed in the [connections config file](/docs/describing-data-sources/configuring-connections).
 1. Annotate the operation as a `@KafkaOperation`, specifying the topic and offset.
 1. The return type should be a `Stream<>` of the defined message type.

## Controlling deserialization
Message deserialization is defined by the model type being exposed.
By default, models are expected to be JSON.

However, this can be controlled by annotating the model with a format annotation.  Currently, formats are limited to protobuf only, but we are working on adding more.

See [Using Protobuf](/docs/describing-data-sources/protobuf/) for more information.
